# 足球队队内管理小程序 - 系统架构设计文档

## 一、项目概述

### 1.1 项目背景
本项目旨在开发一款面向业余足球队队内管理的微信小程序，解决球队日常管理、队内对抗赛组织、数据统计等核心需求，提升球队管理效率和成员参与度。

### 1.2 使用场景
**核心场景：队内对抗赛**
- 球队分为两个小队（红队 vs 蓝队）
- 每周组织一次队内对抗赛
- 各小队独立报名，队长管理本队阵容
- 定期重组队伍（队长选人、改队名）
- 记录每场比赛数据，统计个人和小队战绩

### 1.3 目标用户
- **超级管理员**：球队总负责人（1人）
- **小队队长**：各小队队长（2人，可参与比赛）
- **球队成员**：普通球员（自由报名参赛）
- **临时参赛人员**：偶尔参加的朋友（可选）

### 1.4 核心价值
- 简化队内对抗赛组织流程
- 灵活的队伍重组机制
- 实时数据统计与排行榜
- 增强队内竞技氛围
- 提升球队凝聚力

---

## 二、系统架构设计

### 2.1 整体架构

```
┌─────────────────────────────────────────────────────────┐
│                  微信小程序客户端                          │
│  ┌──────────┬──────────┬──────────┬──────────┬────────┐ │
│  │用户管理  │队伍管理  │比赛管理  │数据统计  │通知公告│ │
│  └──────────┴──────────┴──────────┴──────────┴────────┘ │
└─────────────────────┬───────────────────────────────────┘
                      │ HTTPS/WebSocket
┌─────────────────────▼───────────────────────────────────┐
│                     API网关层                             │
│            (认证、鉴权、限流、日志)                        │
└─────────────────────┬───────────────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────────────┐
│                    业务服务层                             │
│  ┌──────────┬──────────┬──────────┬──────────┬────────┐ │
│  │用户服务  │队伍服务  │比赛服务  │统计服务  │通知服务│ │
│  └──────────┴──────────┴──────────┴──────────┴────────┘ │
└─────────────────────┬───────────────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────────────┐
│                    数据持久层                             │
│  ┌──────────┬──────────┬──────────┬──────────┐          │
│  │MySQL     │Redis     │OSS       │MongoDB   │          │
│  │(主数据)  │(缓存)    │(文件)    │(日志)    │          │
│  └──────────┴──────────┴──────────┴──────────┘          │
└─────────────────────────────────────────────────────────┘
```

### 2.2 技术栈选型

#### 前端（小程序端）
- **框架**: 微信原生小程序 / uni-app / Taro
- **UI组件库**: Vant Weapp / ColorUI
- **状态管理**: Vuex / Pinia（如使用框架）
- **网络请求**: wx.request封装 / axios适配

#### 后端
- **语言**: Node.js (Express/Koa) / Java (Spring Boot) / Python (FastAPI)
- **数据库**: MySQL 8.0+（主数据库）
- **缓存**: Redis 6.0+
- **文件存储**: 阿里云OSS / 腾讯云COS / MinIO
- **消息推送**: 微信模板消息 / 订阅消息

#### 运维
- **容器化**: Docker + Docker Compose
- **CI/CD**: Jenkins / GitHub Actions
- **监控**: Prometheus + Grafana
- **日志**: ELK / 阿里云日志服务

---

## 三、功能模块详细设计

### 3.1 队伍管理模块 ⭐ 新增核心模块

#### 3.1.1 功能清单
- **队伍创建与管理**
  - 创建新队伍（设置队名、队徽、队长）
  - 队伍信息编辑
  - 队伍解散/归档
  - 队伍生命周期管理

- **队伍成员管理**
  - 查看本队成员列表
  - 成员能力值展示（便于选人参考）
  - 临时调动成员（特殊情况）

- **队伍重组功能** ⭐ 核心功能
  - **重组发起**：超级管理员发起重组
  - **队长选定**：指定或投票选出新队长
  - **选人机制**：
    - 两位队长轮流选人（类似NBA选秀）
    - 实时显示剩余可选人员
    - 显示球员历史数据（进球、助攻、出勤率等）
    - 自动平衡队伍实力（可选，根据评分建议）
  - **队名设置**：队长自定义新队名和队徽
  - **确认发布**：重组完成后通知全体成员

- **队伍数据展示**
  - 当前队伍阵容
  - 队伍战绩统计
  - 队内排行榜
  - 历史队伍记录

#### 3.1.2 数据模型
```javascript
// 队伍表
Team {
  id: string (主键)
  name: string (队名，如"红队"、"蓝队")
  logo: string (队徽URL)
  captainId: string (队长ID，外键User)
  color: string (队伍主色调)
  season: string (赛季/期数，如"2025-S1")
  status: enum (active/disbanded/archived)
  createdAt: datetime (创建时间)
  disbandedAt: datetime (解散时间)
  createdBy: string (创建者ID)
}

// 队伍成员关系表
TeamMember {
  id: string
  teamId: string (外键Team)
  userId: string (外键User)
  joinedAt: datetime (加入时间)
  role: enum (captain/member) (队内角色)
  isActive: boolean (是否在队)
}

// 队伍重组记录表
TeamReshuffle {
  id: string
  season: string (赛季)
  initiatorId: string (发起人ID)
  status: enum (draft/completed/cancelled)
  draftOrder: array (选人顺序记录)
  team1Id: string (队伍1 ID)
  team2Id: string (队伍2 ID)
  createdAt: datetime
  completedAt: datetime
}

// 选人记录表
DraftPick {
  id: string
  reshuffleId: string (外键TeamReshuffle)
  round: number (轮次)
  pickNumber: number (选秀顺位)
  teamId: string (选择的队伍)
  userId: string (被选中的球员)
  pickedAt: datetime
}
```

---

### 3.2 用户管理模块

#### 3.2.1 功能清单
- **用户注册与登录**
  - 微信授权登录
  - 手机号绑定
  - 用户信息完善（姓名、号码、位置、照片等）

- **角色权限管理**
  - 角色类型：超级管理员、小队队长、普通成员
  - 权限控制：
    - 超级管理员：队伍重组、全局设置、所有数据管理
    - 小队队长：本队报名管理、阵容设置、队名修改
    - 普通成员：报名参赛、查看数据

- **成员信息管理**
  - 全体成员列表查看
  - 成员详情（个人资料、战绩统计、所属队伍）
  - 成员编辑（管理员权限）
  - 成员状态（在队/退队/请假）

- **个人中心**
  - 个人资料编辑
  - 我的队伍信息
  - 我的战绩（总体战绩 + 本队战绩）
  - 设置（消息通知、隐私设置）

#### 3.2.2 数据模型
```javascript
// 用户表
User {
  id: string (主键)
  openid: string (微信openid)
  unionid: string (微信unionid)
  nickname: string (昵称)
  realName: string (真实姓名)
  avatar: string (头像URL)
  phone: string (手机号)
  jerseyNumber: number (球衣号码)
  position: enum (位置: 守门员/后卫/中场/前锋)
  role: enum (角色: super_admin/captain/member)
  status: enum (状态: active/inactive/leave)
  currentTeamId: string (当前所属队伍ID，外键Team)
  joinDate: date (加入日期)
  createdAt: datetime
  updatedAt: datetime
}

// 角色权限表
Permission {
  id: string
  userId: string (外键)
  canReshuffleTeam: boolean (队伍重组权限)
  canCreateMatch: boolean (创建比赛权限)
  canManageTeam: boolean (管理本队权限-仅队长)
  canManageMember: boolean (管理成员权限)
  canPublishNotice: boolean (发布公告权限)
  canViewAllData: boolean (查看所有数据权限)
}
```

---

### 3.3 比赛管理模块

#### 3.3.1 功能清单
- **比赛创建**
  - 比赛基本信息（时间、地点、费用）
  - 比赛类型区分：
    - **队内对抗赛**（主要场景）：自动关联两支队伍
    - 对外友谊赛/邀请赛（可选）
  - 参赛人数设置（每队人数）
  - 自动提醒功能

- **报名管理** ⭐ 队内对抗赛独立报名
  - **各队独立报名**：
    - 红队成员向红队报名
    - 蓝队成员向蓝队报名
    - 实时显示各队报名人数
  - 报名状态（已报名/未报名/请假）
  - 报名截止时间
  - 候补名单（各队独立）
  - 跨队报名（特殊情况，需队长同意）

- **阵容安排**
  - 各队队长设置本队阵容
  - 首发阵容设置
  - 替补阵容
  - 位置分配
  - 战术板（可选）

- **比赛记录**
  - 比分录入（双方得分）
  - 进球记录（进球者、助攻者、时间、所属队伍）
  - 黄牌/红牌记录
  - MVP评选（可双方各选一个）
  - 比赛照片上传
  - 比赛总结

- **比赛历史**
  - 历史比赛列表
  - 比赛详情回顾
  - 比赛筛选（按时间、队伍、结果）
  - 队伍对战记录

#### 3.3.2 数据模型
```javascript
// 比赛表
Match {
  id: string (主键)
  title: string (比赛标题)
  type: enum (internal_match/friendly/league/cup) (internal_match=队内对抗)
  datetime: datetime (比赛时间)
  location: string (地点)
  locationCoord: object (经纬度)

  // 队内对抗赛字段
  team1Id: string (队伍1 ID，外键Team)
  team2Id: string (队伍2 ID，外键Team)
  maxPlayersPerTeam: number (每队最大人数)

  // 对外比赛字段（可选）
  opponent: string (对手名称，仅对外比赛)

  cost: decimal (费用)
  deadline: datetime (报名截止)
  status: enum (upcoming/ongoing/finished/cancelled)
  creatorId: string (创建者ID)
  season: string (赛季)
  createdAt: datetime
  updatedAt: datetime
}

// 报名表（队内对抗赛需记录所属队伍）
Registration {
  id: string
  matchId: string (外键Match)
  userId: string (外键User)
  teamId: string (外键Team，队内对抗赛必填)
  status: enum (confirmed/waitlist/cancelled/leave)
  registeredAt: datetime
  remark: string (备注，如请假原因)
}

// 比赛阵容表
Lineup {
  id: string
  matchId: string (外键Match)
  userId: string (外键User)
  teamId: string (外键Team，所属队伍)
  position: string (位置)
  isStarting: boolean (是否首发)
  playTime: number (上场时间-分钟)
}

// 比赛事件表
MatchEvent {
  id: string
  matchId: string (外键Match)
  type: enum (goal/assist/yellow_card/red_card/substitution)
  userId: string (外键User)
  teamId: string (外键Team，所属队伍)
  minute: number (发生时间-分钟)
  description: string (描述)
  createdAt: datetime
}

// 比赛结果表
MatchResult {
  id: string
  matchId: string (外键Match)

  // 队内对抗赛结果
  team1Score: number (队伍1得分)
  team2Score: number (队伍2得分)
  winnerTeamId: string (获胜队伍ID，平局为null)

  // 对外比赛结果（可选）
  ourScore: number (我方得分，仅对外比赛)
  opponentScore: number (对方得分，仅对外比赛)

  mvpIds: array (MVP用户ID数组，可多个)
  summary: text (比赛总结)
  photos: array (照片URL数组)
  createdAt: datetime
}
```

---

### 3.4 数据统计模块

#### 3.4.1 功能清单
- **个人数据统计**
  - 总体统计：
    - 出勤率
    - 总参赛场次
    - 总进球数/助攻数
    - 黄红牌统计
    - MVP次数
    - 总体胜率
  - 本队统计（当前所在队伍）：
    - 为本队出战场次
    - 为本队进球/助攻
    - 本队战绩贡献

- **小队数据统计** ⭐ 新增
  - 队伍战绩（胜平负）
  - 队伍总进球/失球
  - 队伍近期战绩（最近10场）
  - 队伍成员表现排行
  - 与对手交锋记录
  - 赛季统计对比

- **全队数据统计**
  - 总比赛场次
  - 整体活跃度
  - 月度/年度统计

- **排行榜** ⭐ 支持多维度
  - 全局排行榜：
    - 射手榜（总进球）
    - 助攻榜
    - MVP榜
    - 出勤榜
  - 队内排行榜：
    - 各小队内部排名
    - 小队对比排名
  - 赛季排行榜（按赛季筛选）

- **数据可视化**
  - 队伍战绩趋势图
  - 队伍对比雷达图
  - 进球分布图
  - 个人数据对比
  - 历史队伍数据对比

#### 3.4.2 数据模型
```javascript
// 个人统计表（总体统计）
PlayerStats {
  id: string
  userId: string (外键)
  season: string (赛季: 2024/2025，all表示总计)
  matchesPlayed: number (参赛场次)
  matchesStarting: number (首发场次)
  goals: number (进球数)
  assists: number (助攻数)
  yellowCards: number (黄牌)
  redCards: number (红牌)
  mvpCount: number (MVP次数)
  wins: number (胜场)
  draws: number (平局)
  losses: number (负场)
  winRate: decimal (胜率)
  attendanceRate: decimal (出勤率)
  updatedAt: datetime
}

// 个人队内统计表（为某队效力的统计）
PlayerTeamStats {
  id: string
  userId: string (外键)
  teamId: string (外键Team)
  season: string (赛季)
  matchesPlayed: number (为该队出战场次)
  goals: number (为该队进球)
  assists: number (为该队助攻)
  wins: number (胜场)
  draws: number (平局)
  losses: number (负场)
  updatedAt: datetime
}

// 小队统计表 ⭐ 新增
TeamStats {
  id: string
  teamId: string (外键Team)
  season: string (赛季)
  totalMatches: number (总场次)
  wins: number (胜)
  draws: number (平)
  losses: number (负)
  goalsFor: number (进球)
  goalsAgainst: number (失球)
  goalDifference: number (净胜球)
  winRate: decimal (胜率)
  currentStreak: string (当前连胜/连败，如"3连胜")
  updatedAt: datetime
}
```

---

### 3.5 通知公告模块

#### 3.5.1 功能清单
- **公告发布**
  - 文本公告
  - 图文公告
  - 紧急公告标记
  - 定时发布

- **消息推送**
  - 比赛提醒（提前1天/3小时）
  - 报名通知（发送给本队成员）
  - 阵容公布通知（发送给本队成员）
  - 比赛结果通知
  - 队伍重组通知
  - @指定成员

- **消息管理**
  - 消息列表
  - 已读/未读状态
  - 消息删除
  - 重要消息置顶

- **通知设置**
  - 消息订阅管理
  - 免打扰时段
  - 推送方式选择

#### 3.5.2 数据模型
```javascript
// 公告表
Notice {
  id: string
  title: string (标题)
  content: text (内容)
  images: array (图片URL数组)
  isUrgent: boolean (是否紧急)
  isPinned: boolean (是否置顶)
  publisherId: string (发布者ID)
  publishTime: datetime (发布时间)
  status: enum (draft/published/archived)
  createdAt: datetime
}

// 消息表
Message {
  id: string
  type: enum (match_remind/registration/lineup/result/notice/team_reshuffle)
  title: string
  content: string
  relatedId: string (关联ID-比赛/公告/队伍重组)
  recipientId: string (接收者ID, null表示全体)
  teamId: string (队伍ID，可用于队伍定向推送)
  isRead: boolean
  createdAt: datetime
}

// 消息设置表
NotificationSetting {
  id: string
  userId: string (外键)
  matchRemind: boolean
  registrationNotify: boolean
  lineupNotify: boolean
  resultNotify: boolean
  noticeNotify: boolean
  muteStartTime: time (免打扰开始)
  muteEndTime: time (免打扰结束)
}
```

---

## 四、核心业务流程

### 4.1 队伍重组流程 ⭐ 核心流程
```
1. 超级管理员发起队伍重组
   ↓
2. 选定或投票产生两位新队长
   ↓
3. 进入选人页面（Draft模式）
   ├─ 显示所有可选球员列表
   ├─ 显示球员历史数据（进球/助攻/出勤率）
   └─ 显示建议评分（可选）
   ↓
4. 队长A选择第1位球员 → 加入A队
   ↓
5. 队长B选择第2位球员 → 加入B队
   ↓
6. 队长A选择第3位球员 → 加入A队
   ↓
7. 循环选人，直到所有球员分配完毕
   ↓
8. 各队长设置队名和队徽
   ↓
9. 确认发布，旧队伍归档
   ↓
10. 系统创建新队伍，更新用户所属队伍
   ↓
11. 发送通知给所有成员（显示新队伍阵容）
```

### 4.2 队内对抗赛组织流程 ⭐ 主要流程
```
1. 管理员创建队内对抗赛
   ├─ 设置比赛时间、地点
   ├─ 自动关联红队 vs 蓝队
   └─ 设置报名截止时间
   ↓
2. 系统分别向两队成员发送报名通知
   ├─ 红队成员收到红队报名通知
   └─ 蓝队成员收到蓝队报名通知
   ↓
3. 各队成员独立报名
   ├─ 红队成员向红队报名
   ├─ 蓝队成员向蓝队报名
   ├─ 实时显示各队报名人数
   └─ 支持请假备注
   ↓
4. 报名截止后，各队队长安排本队阵容
   ├─ 红队队长安排红队阵容
   └─ 蓝队队长安排蓝队阵容
   ↓
5. 系统向各队成员发送本队阵容通知
   ↓
6. 比赛前1天/3小时自动提醒
   ↓
7. 比赛进行中/结束后录入数据
   ├─ 记录双方比分
   ├─ 记录进球/助攻（含所属队伍）
   ├─ 记录黄红牌
   └─ 评选MVP
   ↓
8. 系统自动计算统计数据
   ├─ 更新个人统计
   ├─ 更新队伍统计（胜平负、进球失球）
   └─ 更新排行榜
   ↓
9. 发布比赛结果通知（含比分、MVP）
```

### 4.3 用户注册流程
```
1. 用户打开小程序
   ↓
2. 微信授权登录（获取openid）
   ↓
3. 判断是否首次登录
   ├─ 是：跳转到信息完善页
   │     (填写姓名、号码、位置等)
   └─ 否：进入首页
   ↓
4. 管理员审核（可选）
   ↓
5. 超级管理员分配到某个队伍（或等待下次重组）
   ↓
6. 成为正式成员
```

---

## 五、数据库设计要点

### 5.1 核心表关系
- **队伍相关**：
  - Team 1:N TeamMember（一个队伍多个成员）
  - User N:1 Team（多个用户属于一个队伍）
  - TeamReshuffle 1:N DraftPick（一次重组多次选人）
  - Team 1:N TeamStats（一个队伍多个赛季统计）

- **比赛相关**：
  - Match N:2 Team（一场队内对抗赛关联两个队伍）
  - Match 1:N Registration（一场比赛多个报名）
  - Registration N:1 Team（队内对抗赛报名关联队伍）
  - Match 1:1 MatchResult（一场比赛一个结果）
  - Match 1:N MatchEvent（一场比赛多个事件）
  - MatchEvent N:1 Team（事件关联所属队伍）

- **统计相关**：
  - User 1:N PlayerStats（一个用户多个赛季统计）
  - User 1:N PlayerTeamStats（一个用户为不同队伍效力的统计）
  - Team 1:N PlayerTeamStats（一个队伍多个球员统计）

### 5.2 索引设计
- **User表**: openid(唯一), phone, status, currentTeamId
- **Team表**: season, status, captainId
- **TeamMember表**: teamId+userId(联合唯一), isActive
- **Match表**: datetime, status, type, team1Id, team2Id, season
- **Registration表**: matchId+userId(联合唯一), teamId, status
- **MatchEvent表**: matchId, userId, teamId, type
- **TeamReshuffle表**: season, status
- **Notice表**: publishTime, status, isPinned

### 5.3 性能优化
- 使用Redis缓存热点数据：
  - 当前活跃队伍信息
  - 比赛列表（近期比赛）
  - 排行榜数据
  - 队伍对战记录
- 统计数据定时计算（每晚凌晨2点），避免实时计算
- 图片使用CDN加速
- 数据库读写分离（可选）
- 队伍重组过程使用WebSocket实时同步选人状态

---

## 六、安全设计

### 6.1 认证与鉴权
- 微信登录态验证
- JWT Token机制
- 接口权限验证
- 敏感操作二次确认

### 6.2 数据安全
- 手机号加密存储
- SQL注入防护
- XSS攻击防护
- HTTPS加密传输

### 6.3 隐私保护
- 个人信息脱敏
- 数据权限控制
- 操作日志记录
- 符合微信小程序规范

---

## 七、非功能性需求

### 7.1 性能要求
- 页面加载时间 < 2秒
- 接口响应时间 < 500ms
- 支持100人在线并发

### 7.2 可用性
- 系统可用性 > 99%
- 数据定期备份（每日）
- 故障恢复时间 < 1小时

### 7.3 扩展性
- 支持多球队管理（未来）
- 支持赛事联盟（未来）
- 支持数据导出
- 预留第三方集成接口

---

## 八、开发计划建议

### 第一阶段（MVP - 4周）⭐ 核心基础
**目标：实现队内对抗赛的基本流程**
- 用户登录注册
- 队伍创建（手动分配成员）
- 队内对抗赛创建
- 各队独立报名功能
- 简单比赛记录录入
- 基础通知功能

### 第二阶段（核心功能 - 4周）⭐ 重组+统计
**目标：实现队伍重组和完整统计**
- **队伍重组功能**（Draft选人机制）
- 阵容管理（各队长独立管理）
- 完整比赛记录（进球/助攻/黄红牌）
- 个人统计和小队统计
- 排行榜（全局+队内）
- MVP评选

### 第三阶段（优化增强 - 3周）
**目标：提升用户体验和数据展示**
- 数据可视化（战绩趋势图、雷达图）
- 队伍对战历史记录
- 消息推送优化
- 性能优化（Redis缓存）
- 用户体验优化
- 小程序分享功能

### 第四阶段（扩展功能 - 按需）
**可选增强功能**
- 财务管理（AA制费用分摊）
- 对外友谊赛功能
- 训练计划管理
- 比赛视频/精彩瞬间
- 赛季总结报告
- 社交互动（评论、点赞）

---

## 九、项目目录结构建议

### 小程序端
```
miniprogram/
├── pages/                  # 页面
│   ├── index/             # 首页（显示我的队伍、近期比赛）
│   ├── team/              # 队伍相关 ⭐ 新增
│   │   ├── list/          # 队伍列表（当前+历史）
│   │   ├── detail/        # 队伍详情（阵容+战绩）
│   │   ├── reshuffle/     # 队伍重组（Draft选人页面）
│   │   └── vs/            # 队伍对战记录
│   ├── match/             # 比赛相关
│   │   ├── list/          # 比赛列表
│   │   ├── detail/        # 比赛详情
│   │   ├── create/        # 创建比赛
│   │   ├── register/      # 报名页面（显示本队报名情况）
│   │   └── record/        # 比赛记录录入
│   ├── user/              # 用户相关
│   │   ├── profile/       # 个人中心
│   │   ├── members/       # 成员列表
│   │   └── stats/         # 个人统计
│   ├── stats/             # 数据统计
│   │   ├── overview/      # 总览
│   │   ├── ranking/       # 排行榜
│   │   └── team-compare/  # 队伍对比 ⭐ 新增
│   └── notice/            # 通知公告
│       ├── list/          # 公告列表
│       └── detail/        # 公告详情
├── components/            # 组件
│   ├── team-card/         # 队伍卡片组件
│   ├── player-card/       # 球员卡片组件（用于Draft）
│   ├── match-card/        # 比赛卡片组件
│   └── stats-chart/       # 统计图表组件
├── utils/                 # 工具函数
├── api/                   # API接口
├── store/                 # 状态管理
├── static/                # 静态资源
└── app.js/app.json/app.wxss
```

### 后端服务
```
server/
├── src/
│   ├── controllers/       # 控制器
│   │   ├── user.controller.js
│   │   ├── team.controller.js      # ⭐ 队伍管理
│   │   ├── reshuffle.controller.js # ⭐ 队伍重组
│   │   ├── match.controller.js
│   │   ├── stats.controller.js
│   │   └── notice.controller.js
│   ├── services/          # 业务逻辑
│   │   ├── user.service.js
│   │   ├── team.service.js
│   │   ├── draft.service.js        # ⭐ Draft选人逻辑
│   │   ├── match.service.js
│   │   ├── stats.service.js        # 统计计算逻辑
│   │   └── notification.service.js
│   ├── models/            # 数据模型
│   │   ├── User.js
│   │   ├── Team.js
│   │   ├── TeamMember.js
│   │   ├── TeamReshuffle.js
│   │   ├── Match.js
│   │   ├── Registration.js
│   │   ├── MatchEvent.js
│   │   └── ...
│   ├── middlewares/       # 中间件
│   │   ├── auth.js        # 认证中间件
│   │   ├── permission.js  # 权限验证
│   │   └── logger.js
│   ├── utils/             # 工具函数
│   │   ├── calculator.js  # 统计计算工具
│   │   └── draft.js       # Draft算法工具
│   ├── config/            # 配置文件
│   ├── websocket/         # WebSocket服务（重组实时同步）
│   └── routes/            # 路由
├── tests/                 # 测试
├── docs/                  # 文档
└── scripts/               # 脚本
    └── calc-stats.js      # 定时统计任务
```

---

## 十、附录

### 10.1 技术选型对比
| 方案 | 优势 | 劣势 | 推荐度 |
|------|------|------|--------|
| 微信原生 | 性能最优，功能完整 | 开发效率低，不跨平台 | ⭐⭐⭐⭐ |
| uni-app | 跨平台，生态好 | 性能略逊，包体积大 | ⭐⭐⭐⭐⭐ |
| Taro | React语法，组件丰富 | 学习成本高 | ⭐⭐⭐ |

### 10.2 参考资源
- 微信小程序官方文档: https://developers.weixin.qq.com/miniprogram/dev/framework/
- uni-app官方文档: https://uniapp.dcloud.net.cn/
- Vant Weapp组件库: https://vant-contrib.gitee.io/vant-weapp/

---

## 十一、特别说明

### 与实际使用场景的适配
本文档已根据业余足球队的实际使用场景进行优化：

✅ **核心特性**：
1. 队内分两队对抗（不是对外比赛）
2. 各队独立报名和管理
3. 定期重组队伍（Draft选人机制）
4. 队长轮流选人
5. 队名可自定义
6. 双维度统计（个人+队伍）

✅ **关键差异点**：
- 新增"队伍管理模块"作为核心模块
- 新增"队伍重组"功能（类似NBA选秀）
- 比赛报名改为"各队独立报名"
- 统计维度增加"小队统计"
- 数据模型增加队伍关联字段

---

**文档版本**: v2.0（针对队内对抗场景优化）
**创建日期**: 2025-10-16
**最后更新**: 2025-10-16
**适用场景**: 业余足球队队内对抗赛管理
